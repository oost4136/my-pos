<!DOCTYPE html>
<html lang="en">
<head>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="mobile-web-app-capable" content="yes">
<link rel="apple-touch-icon" href="your-logo-url.png">
<link rel="icon" href="your-logo-url.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Professional POS</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/dexie/dist/dexie.js"></script>
</head>
<body>

    <div id="login-view" class="overlay">
        <div class="login-box">
            <h1>Store Login</h1>
            <input type="text" id="shop-name-input" placeholder="Shop Name">
            <input type="password" id="shop-pin-input" placeholder="PIN (1234)">
            <button onclick="handleLogin()">Enter Shop</button>
        </div>
    </div>

    <div id="app-view" style="display:none;">
        <header>
            <div class="header-left">
                <h2 id="display-name">Store Name</h2>
                <div class="revenue-badge">Today: <span id="today-revenue">‚Ç¶0.00</span></div>
            </div>
            <div class="header-right">
                <input type="text" id="search-input" placeholder="Search products..." oninput="handleSearch()">
                <select id="currency-select" onchange="changeCurrency()" style="padding: 5px; border-radius: 4px;">
                     <option value="‚Ç¶">‚Ç¶ Naira</option>
                     <option value="$">$ Dollar</option>
                     <option value="‚Ç¨">‚Ç¨ Euro</option>
                     <option value="¬£">¬£ Pound</option>
                </select>
                <button onclick="toggleGuide()" style="background: #17a2b8; color: white; border: none; border-radius: 50%; width: 30px; height: 30px; cursor: pointer; font-weight: bold; margin-left: 10px;">?</button>
                <button onclick="handleLogout()" class="logout-btn">Logout</button>
            </div>
        </header>

        <div class="main-container">
            <section class="products">
                <div class="category-bar">
                    <button onclick="setCategory('All')">All</button>
                    <button onclick="setCategory('Drinks')">Drinks</button>
                    <button onclick="setCategory('Food')">Food</button>
                    <button onclick="setCategory('Others')">Others</button>
                </div>
                
                <div id="product-grid"></div>
                <button id="back-to-top" onclick="document.querySelector('.products').scrollTo({top: 0, behavior: 'smooth'})" style="display:none;">‚Üë</button>
            </section>

            <aside class="cart">
                <h3>Current Order</h3>
                <div id="cart-list"></div>
                <div class="total-section">
                    <strong>Total: <span id="cart-total">‚Ç¶0.00</span></strong>
                    <button id="checkout-btn" onclick="handleCheckout()">PAY NOW</button>
                    <button class="clear-btn" onclick="clearFullCart()">Clear Order / Cancel</button>
                </div>
            </aside>
        </div>

        <footer class="admin">
            <h3>Admin Panel</h3>
            <div class="admin-grid">
    <div class="add-product-form">
        <h4>Inventory Entry</h4>
        <input type="text" id="add-name" placeholder="Item Name">
        <input type="number" id="add-price" placeholder="Price">
        <input type="number" id="add-stock" placeholder="Initial Stock">
        <select id="add-cat"placeholder="Select type">
            <option value="Drinks">Drinks</option>
            <option value="Food">Food</option>
            <option value="Others">Others</option>
        </select>
        <label style="font-size:11px;">Product Photo:</label>
        <input type="file" id="add-photo-file" accept="image/*">
        <button onclick="addNewProduct()">+ Add to Inventory</button>
    </div>
    
    <div class="admin-actions">
   
    <h4>Store Management</h4>
    
    <div style="margin-bottom: 20px; background: rgba(0,0,0,0.2); padding: 10px; border-radius: 5px;">
        <label style="font-size: 13px; color: #27ae60; font-weight: bold;">Edit Shop Name:</label>
        <div style="display: flex; gap: 5px; margin-top: 5px;">
            <input type="text" id="edit-shop-name-input" placeholder="Enter Shop Name" style="flex: 1; margin-bottom: 0;">
            <button onclick="updateShopName()" style="width: auto; padding: 0 15px; background: #27ae60; margin: 0;">Save</button>
        </div>
    </div>

    <div style="margin-bottom: 20px;">
        <label style="font-size: 13px; color: #bdc3c7;">Update Brand Logo</label>
        <input type="file" id="shop-logo-file" accept="image/*" onchange="uploadLogo()">
    </div>
     <button onclick="exportToCSV()" style="background:#3498db; color:white;">üìÑ Detailed Sales Report</button>
    <button onclick="exportStockReport()" style="background:#17a2b8; color:white;">üìä Current Stock Report</button>
    
    <button onclick="resetSalesData()" class="reset-btn">‚ö†Ô∏è Reset All Sales Data</button>
    </div>
    
    </div>
    
    <div class="copyright-footer">
    &copy; 2026 <span id="copyright-shop-name">Julimeals</span>. All Rights Reserved. 
    <br>
    <small>Powered by oyinoost tech</small>
</div>
</div>
<div class="copyright-footer">
    &copy; 2026 <span id="copyright-shop-name">Julimeals</span>. All Rights Reserved. 
    <br>
    <small>Powered by oyinoost tech</small>
</div>
        </footer>
    </div>

    <div id="receipt-modal" class="modal-overlay" style="display:none;">
        <div class="receipt-card">
            <img id="receipt-logo-display" src="" style="max-width:80px; display:none; margin:0 auto 10px;">
            <h2 id="receipt-shop-name">RECEIPT</h2>
            <hr>
            <div id="receipt-items"></div>
            <hr>
            <h3>TOTAL: <span id="receipt-total"></span></h3>
            <button onclick="window.print()" class="btn-print">Print Receipt (PDF)</button>
            <button onclick="closeReceipt()" class="btn-close">Close & New Sale</button>
            <button onclick="voidTransaction()" class="btn-void">Cancel & Void Sale</button>
        </div>
    </div>

    <script src="app.js"></script>
    <div id="guide-modal" class="modal-overlay" style="display:none;">
    <div class="receipt-card" style="text-align: left; max-width: 450px;">
        <h2 style="text-align: center; color: #28a745;">üìñ Staff Guide</h2>
        <div style="max-height: 400px; overflow-y: auto; font-size: 14px; line-height: 1.6;">
            <p><strong>1. Selling:</strong> Tap product ‚Üí Adjust quantity in cart ‚Üí Tap <b>PAY NOW</b>.</p>
            <p><strong>2. After Payment:</strong> Ask if they want a receipt. Print if needed, then click <b>Close & New Sale</b>.</p>
            <p><strong>3. Mistakes:</strong> If you realize a mistake after paying, use the <b>RED Void button</b> on the receipt to return stock.</p>
            <p><strong>4. Inventory:</strong> 
                <br>üü° Yellow = Low Stock (Order more!)
                <br>‚ö™ Grey = Out of Stock
            </p>
            <p><strong>5. Admin:</strong> Use the buttons at the bottom to restock items or change prices.</p>
            <hr>
            <p style="font-size: 12px; color: #d9534f;">‚ö†Ô∏è <b>IMPORTANT:</b> Never clear browser history/cache, or our shop data will be deleted!</p>
        </div>
        <button onclick="toggleGuide()" style="background: #333; color: white; width: 100%; padding: 10px; margin-top: 15px; border: none; border-radius: 5px; cursor: pointer;">Got it!</button>
    </div>
</div>
</body>
</html>
